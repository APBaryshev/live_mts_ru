name: Deploy Documentation Only

on:
    workflow_dispatch:
    push:
        branches: [main]
        paths:
            - "docs/**"
            - "mkdocs.yml"
            - "scripts/builddocs.sh"

permissions:
    contents: write
    pages: write
    id-token: write

jobs:
    deploy-docs:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v4

            - name: Setup Python
              uses: actions/setup-python@v4
              with:
                  python-version: "3.10"

            - name: Install dependencies
              run: |
                  python -m pip install --upgrade pip
                  pip install mkdocs mkdocs-material pymdown-extensions

            - name: Build documentation
              run: |
                  mkdocs build --site-dir public

            - name: Create landing page
              run: |
                  cat > public/index.html << 'EOF'
                  <!DOCTYPE html>
                  <html lang="ru">
                  <head>
                      <meta charset="UTF-8">
                      <meta name="viewport" content="width=device-width, initial-scale=1.0">
                      <title>MTS Live - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</title>
                      <style>
                          body { 
                              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
                              margin: 0; 
                              padding: 40px; 
                              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                              min-height: 100vh;
                          }
                          .container { 
                              max-width: 600px; 
                              margin: 0 auto; 
                              background: white;
                              border-radius: 15px;
                              padding: 40px;
                              box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                          }
                          h1 { 
                              color: #000000;
                              text-align: center;
                              margin-bottom: 30px;
                              font-weight: 700;
                              font-size: 32px;
                          }
                          .links { 
                              display: flex; 
                              flex-direction: column; 
                              gap: 15px; 
                          }
                          .link { 
                              display: flex;
                              align-items: center;
                              padding: 20px; 
                              background: #f8f9fa;
                              border: 2px solid #e9ecef;
                              border-radius: 10px;
                              text-decoration: none;
                              color: #212529;
                              font-weight: 500;
                              transition: all 0.3s ease;
                          }
                          .link:hover {
                              background: #007bff;
                              color: white;
                              border-color: #007bff;
                              transform: translateY(-2px);
                          }
                          .icon {
                              margin-right: 15px;
                              font-size: 24px;
                          }
                          .badge {
                              margin-left: auto;
                              background: #28a745;
                              color: white;
                              padding: 6px 12px;
                              border-radius: 15px;
                              font-size: 12px;
                              font-weight: 600;
                          }
                      </style>
                  </head>
                  <body>
                      <div class="container">
                          <h1>üé≠ MTS Live Autotests</h1>
                          <div class="links">
                              <a href="./" class="link">
                                  <span class="icon">üìö</span>
                                  –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
                                  <span class="badge">MkDocs</span>
                              </a>
                          </div>
                      </div>
                  </body>
                  </html>
                  EOF

            - name: Setup Pages
              uses: actions/configure-pages@v3

            - name: Upload artifact
              uses: actions/upload-pages-artifact@v2
              with:
                  path: ./public

            - name: Deploy to GitHub Pages
              id: deployment
              uses: actions/deploy-pages@v2
# name: Deploy Documentation

# on:
#     workflow_dispatch:
#     push:
#         branches: [main, dev]
#         paths:
#             - "docs/**"
#             - "mkdocs.yml"
#             - "scripts/builddocs.sh"

# permissions:
#     contents: write
#     pages: write
#     id-token: write

# jobs:
#     build-and-deploy-docs:
#         runs-on: ubuntu-latest
#         steps:
#             - name: Checkout code
#               uses: actions/checkout@v4

#             - name: Install Python dependencies
#               run: |
#                   python -m pip install --upgrade pip
#                   pip install mkdocs mkdocs-material pymdown-extensions

#             - name: Build documentation
#               run: bash scripts/builddocs.sh

#             - name: Create landing page
#               run: |
#                   cp docs/landing.html public/index.html

#             - name: Setup Pages
#               uses: actions/configure-pages@v3

#             - name: Upload artifact
#               uses: actions/upload-pages-artifact@v2
#               with:
#                   path: ./public

#             - name: Deploy to GitHub Pages
#               id: deployment
#               uses: actions/deploy-pages@v2
